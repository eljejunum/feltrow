jQuery(function(e){e(window).bind("resize",function(t){if(e(t.target).hasClass("ui-resizable"))return;e("#panels-container .grid-container").panelsResizeCells()});e("#panels-container").sortable({items:"> .grid-container",handle:".grid-handle",tolerance:"pointer",stop:function(){e(this).find(".cell").each(function(){e(this).find('input[name$="[grid]"]').val(e("#panels-container .grid-container").index(e(this).closest(".grid-container")))});e("#panels-container .panels-container").trigger("refreshcells")}});var t={};t[panels.i10n.buttons.add]=function(){var t=Number(e("#grid-add-dialog").find("input").val());if(t==NaN){alert("Invalid Number");return false}t=Math.round(t);t=Math.max(1,t);t=Math.min(10,t);var n=window.panels.createGrid(t);n.hide().slideDown();e("#grid-add-dialog").dialog("close")};e("#grid-add-dialog").show().dialog({dialogClass:"panels-admin-dialog",autoOpen:false,modal:true,title:e("#grid-add-dialog").attr("data-title"),open:function(){e(this).find("input").val(2).select()},buttons:t}).on("keydown",function(t){if(t.keyCode==e.ui.keyCode.ENTER){e(this).closest(".ui-dialog").find(".ui-dialog-buttonpane .ui-button:eq(0)").click()}else if(t.keyCode===e.ui.keyCode.ESCAPE){e(this).dialog("close")}});e("#panels-dialog").show().dialog({dialogClass:"panels-admin-dialog",autoOpen:false,resizable:false,draggable:false,modal:true,title:e("#panels-dialog").attr("data-title"),minWidth:960,maxHeight:Math.round(e(window).height()*.925),close:function(){e("#panels-container .panel.new-panel").hide().slideDown(1e3).removeClass("new-panel")}}).on("keydown",function(t){if(t.keyCode===e.ui.keyCode.ESCAPE){e(this).dialog("close")}}).find(".panel-type").disableSelection();e("#so-panels-panels .handlediv").click(function(){setTimeout(function(){e(window).resize()},150)});e("#panels .panels-add").button({icons:{primary:"ui-icon-add"},text:false}).click(function(){e("#panels-text-filter-input").val("").keyup();e("#panels-dialog").dialog("open");return false});e("#panels .grid-add").button({icons:{primary:"ui-icon-columns"},text:false}).click(function(){e("#grid-add-dialog").dialog("open");return false});e("#siteorigin-widgets-link").data("text",e("#siteorigin-widgets-link").html());e("#panels-text-filter-input").keyup(function(t){if(t.keyCode==13){var n=e("#panels-dialog .panel-type-list .panel-type:visible");if(n.length==1)n.click();return}var r=e(this).val();e("#panels-dialog .panel-type-list .panel-type").show().each(function(){if(r=="")return;if(e(this).find("h3").html().toLowerCase().indexOf(r)==-1){e(this).hide()}})}).click(function(){e(this).keyup()});e("#panels-dialog .panel-type").click(function(){var t=e("#panels-dialog").panelsCreatePanel(e(this).attr("data-class"));panels.addPanel(t,null,null,true);e("#panels-dialog").dialog("close")});if(typeof panelsData!="undefined")panels.loadPanels(panelsData);else panels.createGrid(1);e(window).resize(function(){e(".panels-admin-dialog").filter(":data(dialog)").dialog("option","position","center")});e("#wp-content-editor-tools").find(".wp-switch-editor").click(function(){var t=e(this);e("#wp-content-editor-container, #post-status-info").show();e("#so-panels-panels").hide();e("#wp-content-wrap").removeClass("panels-active");e("#content-resize-handle").show()}).end().prepend(e('<a id="content-panels" class="hide-if-no-js wp-switch-editor switch-panels">'+e("#so-panels-panels h3.hndle span").html()+"</a>").click(function(){var t=e(this);e("#wp-content-wrap").removeClass("tmce-active html-active");e("#wp-content-editor-container, #post-status-info").hide();e("#so-panels-panels").show();e("#wp-content-wrap").addClass("panels-active");e(window).resize();e("#content-resize-handle").hide();return false}));e("#wp-content-editor-tools .wp-switch-editor").click(function(){var t=e(this);var n=t.attr("id").split("-");e("#wp-content-wrap").addClass(n[1]+"-active")});e("#panels-home-page #post-body").show();e("#panels-home-page #post-body-wrapper").css("background","none");e("#so-panels-panels").insertAfter("#wp-content-editor-container").addClass("wp-editor-container").hide().find(".handlediv").remove().end().find(".hndle").html("").append(e("#add-to-panels"));e("#content-panels").click(function(){e(window).resize()});if(typeof panelsData!="undefined"||e("#panels-home-page").length)e("#content-panels").click();setTimeout(function(){if(typeof panelsData!="undefined"||e("#panels-home-page").length)e("#content-panels").click();e("#so-panels-panels .hndle").unbind("click");e("#so-panels-panels .cell").eq(0).click()},150);if(e("#panels-home-page").length){e("#content-tmce, #content-html").remove();e("#content-panels").hide();e("#panels-toggle-switch").mouseenter(function(){e(this).addClass("subtle-move")}).click(function(){e(this).toggleClass("state-off").toggleClass("state-on").removeClass("subtle-move");e("#panels-home-enabled").val(e(this).hasClass("state-off")?"false":"true")}).add("#panels-toggle-switch *").disableSelection();e("#post-preview").click(function(t){if(e("#wp-content-wrap").hasClass("panels-active")){var n=e("#panels-container").closest("form");var r=n.attr("action");n.attr("action",panels.previewUrl).attr("target","_blank").submit().attr("action",r).attr("target","_self");t.preventDefault()}})}e("input.dpe-fp-thumbnail").each(function(){if(this.checked){e(this).parent().next().slideDown("fast")}else{e(this).parent().next().slideUp("fast")}});e(".dpe-fp-widget").on("change","input.dpe-fp-thumbnail",function(t){if(this.checked){e(this).parent().next().slideDown("fast")}else{e(this).parent().next().slideUp("fast")}})})